OpenShift Multiboot System - Deployment Log
Started at Sat Apr 12 14:03:50 CEST 2025
----------------------------------------
2025-04-12 14:03:50 - OpenShift Multiboot System - Final Deployment
Running in check-only mode
2025-04-12 14:04:03 - Step 1: Generate OpenShift ISOs
2025-04-12 14:04:03 - COMMAND: ./scripts/generate_openshift_iso.py --version 4.16 --rendezvous-ip 192.168.2.230
2025-04-12 14:04:03 - SKIPPED (check-only mode)
2025-04-12 14:04:03 - COMMAND: ./scripts/generate_openshift_iso.py --version 4.17 --rendezvous-ip 192.168.2.230
2025-04-12 14:04:03 - SKIPPED (check-only mode)
2025-04-12 14:04:03 - COMMAND: ./scripts/generate_openshift_iso.py --version 4.18 --rendezvous-ip 192.168.2.230
2025-04-12 14:04:03 - SKIPPED (check-only mode)
2025-04-12 14:04:03 - Step 2: Configure Netboot Menu
2025-04-12 14:04:03 - COMMAND: ./scripts/setup_netboot.py --truenas-ip 192.168.2.245
2025-04-12 14:04:03 - SKIPPED (check-only mode)
2025-04-12 14:04:03 - Step 3: Verify Boot Methods
2025-04-12 14:04:03 - COMMAND: ./scripts/switch_openshift.py --server 192.168.2.230 --method iscsi --version 4.18 --check-only
Target 'openshift_4_18' is available in configuration
  IQN: iqn.2005-10.org.freenas.ctl:iscsi.r630.openshift418
  IP: 192.168.2.245:3260
  LUN: 4
  Description: OpenShift 4.18 boot target
2025-04-12 14:04:03 - SUCCESS
2025-04-12 14:04:03 - COMMAND: ./scripts/switch_openshift.py --server 192.168.2.230 --method iso --version 4.18 --check-only
Warning: Unable to verify ISO availability at http://192.168.2.245/openshift_isos/4.18/agent.x86_64.iso
ISO for OpenShift 4.18 might not be accessible
2025-04-12 14:04:03 - SUCCESS
2025-04-12 14:04:03 - COMMAND: ./scripts/switch_openshift.py --server 192.168.2.230 --method netboot --check-only
Warning: Netboot.xyz at https://netboot.omnisack.nl/ipxe/netboot.xyz.efi may not be accessible (HTTP 404)
netboot.xyz might not be accessible
2025-04-12 14:04:04 - SUCCESS
2025-04-12 14:04:04 - Step 4: Run Final Validation Tests
2025-04-12 14:04:04 - COMMAND: ./scripts/test_setup.sh

[0;34m======================================================================[0m
[0;34m== OpenShift Multiboot System Test Script[0m
[0;34m======================================================================[0m
This script will run various commands in test/dry-run mode to verify the
functionality of the OpenShift multiboot system without making actual changes.

[0;34m======================================================================[0m
[0;34m== Testing TrueNAS Autodiscovery[0m
[0;34m======================================================================[0m

[0;33mDiscovering TrueNAS configuration without making changes:[0m
[0;32m> ./scripts/truenas_autodiscovery.py --discover-only --host 192.168.2.245 --port 444[0m
[0;33mExecuting...[0m
Connecting to TrueNAS API at: https://192.168.2.245:444/api/v2.0/
❌ Failed to connect to TrueNAS Scale: 401 Client Error: Unauthorized for url: https://192.168.2.245:444/api/v2.0/system/info

❌ Error: 401 Client Error: Unauthorized for url: https://192.168.2.245:444/api/v2.0/system/info
[0;31m✗ Command failed[0m

[0;34m======================================================================[0m
[0;34m== Testing iSCSI Target Configuration[0m
[0;34m======================================================================[0m

[0;33mChecking if OpenShift 4.18 iSCSI target is properly configured:[0m
[0;32m> ./scripts/switch_openshift.py --server 192.168.2.230 --method iscsi --version 4.18 --check-only[0m
[0;33mExecuting...[0m
Target 'openshift_4_18' is available in configuration
  IQN: iqn.2005-10.org.freenas.ctl:iscsi.r630.openshift418
  IP: 192.168.2.245:3260
  LUN: 4
  Description: OpenShift 4.18 boot target
[0;32m✓ Command executed successfully[0m

[0;34m======================================================================[0m
[0;34m== Testing ISO Availability[0m
[0;34m======================================================================[0m

[0;33mChecking if OpenShift 4.18 ISO is available (note: this will likely fail unless the ISO exists):[0m
[0;32m> ./scripts/switch_openshift.py --server 192.168.2.230 --method iso --version 4.18 --check-only[0m
[0;33mExecuting...[0m
Warning: Unable to verify ISO availability at http://192.168.2.245/openshift_isos/4.18/agent.x86_64.iso
ISO for OpenShift 4.18 might not be accessible
[0;32m✓ Command executed successfully[0m

[0;34m======================================================================[0m
[0;34m== Testing OpenShift ISO Generation[0m
[0;34m======================================================================[0m
[0;33mNote: The following command will not be executed automatically as it requires a pull secret.[0m
[0;32m> ./scripts/generate_openshift_iso.py --version 4.18 --rendezvous-ip 192.168.2.230 --skip-upload --output-dir ./test_output[0m
[0;33mTo run this test, execute the above command manually with your pull secret.[0m

[0;34m======================================================================[0m
[0;34m== Testing OpenShift Version Switching[0m
[0;34m======================================================================[0m
[0;33mThe following commands demonstrate how to switch OpenShift versions.[0m
[0;33mThey are shown for reference but not executed to avoid actual system changes.[0m
[0;32m# Configure for ISO boot:[0m
[0;32m./scripts/switch_openshift.py --server 192.168.2.230 --method iso --version 4.18[0m
[0;32m# Switch to OpenShift 4.18 via iSCSI:[0m
[0;32m./scripts/switch_openshift.py --server 192.168.2.230 --method iscsi --version 4.18[0m
[0;32m# Switch to OpenShift 4.17 via iSCSI:[0m
[0;32m./scripts/switch_openshift.py --server 192.168.2.230 --method iscsi --version 4.17[0m
[0;32m# Boot using netboot:[0m
[0;32m./scripts/switch_openshift.py --server 192.168.2.230 --method netboot --reboot[0m

[0;34m======================================================================[0m
[0;34m== Testing Summary and Next Steps[0m
[0;34m======================================================================[0m
The OpenShift multiboot system has been installed and initial tests have been performed.

[0;32mNext steps:[0m
1. Run the TrueNAS autodiscovery script to set up your TrueNAS Scale server:
   [0;32m./scripts/truenas_autodiscovery.py --host 192.168.2.245 --port 444[0m
2. Generate an OpenShift ISO for installation:
   [0;32m./scripts/generate_openshift_iso.py --version 4.18 --rendezvous-ip 192.168.2.230[0m
3. Configure your R630 server to boot from the ISO:
   [0;32m./scripts/switch_openshift.py --server 192.168.2.230 --method iso --version 4.18 --reboot[0m
4. After installation, create a snapshot or clone of the installation in TrueNAS
5. Set up netboot custom menu:
   [0;32m./scripts/setup_netboot.py --truenas-ip 192.168.2.245[0m
6. Switch between different OpenShift versions or boot methods using the switch_openshift.py script
2025-04-12 14:04:17 - SUCCESS
2025-04-12 14:04:17 - Deployment Summary
----------------------------------------
Deployment finished at Sat Apr 12 14:04:17 CEST 2025
Status: COMPLETE
