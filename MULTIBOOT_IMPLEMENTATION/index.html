
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Dell PowerEdge R630 OpenShift Multiboot System">
      
      
        <meta name="author" content="Bart van den Heuvel">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../NETBOOT_IMPLEMENTATION/">
      
      
      <link rel="icon" href="../docs/assets/images/r630-iscsi-switchbot-new-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Multiboot - OpenShift Multiboot System</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../docs/assets/css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multiboot-system-implementation-plan" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OpenShift Multiboot System" class="md-header__button md-logo" aria-label="OpenShift Multiboot System" data-md-component="logo">
      
  <img src="../docs/assets/images/r630-iscsi-switchbot-new-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenShift Multiboot System
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multiboot
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/redhat/r630-iscsi-switchbot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Implementation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../TEST_PLAN/" class="md-tabs__link">
          
  
  
  Testing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../docs/TRUENAS_AUTHENTICATION/" class="md-tabs__link">
          
  
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../ENHANCEMENT_PLAN/" class="md-tabs__link">
          
  
  
  Future Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../PROJECT_COMPLETION/" class="md-tabs__link">
          
  
  
  Project Status

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OpenShift Multiboot System" class="md-nav__button md-logo" aria-label="OpenShift Multiboot System" data-md-component="logo">
      
  <img src="../docs/assets/images/r630-iscsi-switchbot-new-logo.png" alt="logo">

    </a>
    OpenShift Multiboot System
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/redhat/r630-iscsi-switchbot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Implementation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Multiboot
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Multiboot
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      System Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#truenas-scale-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      TrueNAS Scale Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TrueNAS Scale Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iscsi-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-truenas-scale-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      1. TrueNAS Scale Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. TrueNAS Scale Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-create-openshift-installation-storage" class="md-nav__link">
    <span class="md-ellipsis">
      a. Create OpenShift Installation Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-set-up-nfs-sharing-for-isos" class="md-nav__link">
    <span class="md-ellipsis">
      b. Set Up NFS Sharing for ISOs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-openshift-iso-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      2. OpenShift ISO Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. OpenShift ISO Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-generate-agent-based-isos" class="md-nav__link">
    <span class="md-ellipsis">
      a. Generate Agent-Based ISOs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-dell-r630-server-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dell R630 Server Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Dell R630 Server Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-configure-iscsi-initiator" class="md-nav__link">
    <span class="md-ellipsis">
      a. Configure iSCSI Initiator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-initial-openshift-installation" class="md-nav__link">
    <span class="md-ellipsis">
      b. Initial OpenShift Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-version-switching" class="md-nav__link">
    <span class="md-ellipsis">
      ### 4. Version Switching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-alternative-os-with-netbootxyz" class="md-nav__link">
    <span class="md-ellipsis">
      5. Alternative OS with netboot.xyz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-managing-multiple-servers" class="md-nav__link">
    <span class="md-ellipsis">
      6. Managing Multiple Servers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-truenas_autodiscoverypy" class="md-nav__link">
    <span class="md-ellipsis">
      1. truenas_autodiscovery.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-setup_truenassh" class="md-nav__link">
    <span class="md-ellipsis">
      2. setup_truenas.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generate_openshift_isopy" class="md-nav__link">
    <span class="md-ellipsis">
      3. generate_openshift_iso.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-switch_openshiftpy" class="md-nav__link">
    <span class="md-ellipsis">
      4. switch_openshift.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-plan" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Plan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      Maintenance Procedures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Maintenance Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-openshift-version" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New OpenShift Version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-custom-netbootxyz-options" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Custom netboot.xyz Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backing-up-boot-disks" class="md-nav__link">
    <span class="md-ellipsis">
      Backing Up Boot Disks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iscsi-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Boot Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-boot-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Network Boot Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-server-management" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Server Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NETBOOT_IMPLEMENTATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Netboot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../IMPLEMENTATION_SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementation Summary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TEST_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TEST_RESULTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/TESTING_IMPROVEMENTS.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Improvements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/TRUENAS_AUTHENTICATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TrueNAS Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/ADMIN_HANDOFF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin Handoff
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/GITHUB_ACTIONS_USAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/OPENSHIFT_VALUES_SYSTEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenShift Values System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/DEPLOYMENT_TRACKING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Secrets Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Secrets Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/SECRETS_PROVIDER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secrets Provider System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/VAULT_SECRETS_MANAGEMENT.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HashiCorp Vault Integration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Component Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Component Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/COMPONENT_ARCHITECTURE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/COMPONENT_TUTORIAL.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Component Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/SCRIPT_MIGRATION_PLAN.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Script Migration Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/ERROR_HANDLING_PATTERNS.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/COMPONENT_TESTING_STRATEGY.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Component Testing Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/S3_STORAGE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Storage Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/MINIO_DUAL_BUCKET_SETUP.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MinIO Dual-Bucket Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/ISCSI_OPENSHIFT_INTEGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    iSCSI and OpenShift Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/ISCSI_TARGET_CREATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    iSCSI Target Creation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/TRUENAS_ISCSI_FINDING_BLOCK_DEVICES_USE_OCP_AGENT_BASED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    iSCSI Block Devices with OpenShift Agent
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/redhat/r630-iscsi-switchbot/blob/master/frontend/public/brand-assets/BRAND-ASSET-GUIDELINES.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Brand Assets Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
        
          
          <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/examples/truenas_auth.json.example" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TrueNAS Auth Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Future Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Future Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ENHANCEMENT_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancement Plan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project Status
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Project Status
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PROJECT_COMPLETION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Completion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FINAL_REPORT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Final Report
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/FINAL_DEMO_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Final Demo Plan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      System Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#truenas-scale-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      TrueNAS Scale Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TrueNAS Scale Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iscsi-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-truenas-scale-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      1. TrueNAS Scale Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. TrueNAS Scale Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-create-openshift-installation-storage" class="md-nav__link">
    <span class="md-ellipsis">
      a. Create OpenShift Installation Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-set-up-nfs-sharing-for-isos" class="md-nav__link">
    <span class="md-ellipsis">
      b. Set Up NFS Sharing for ISOs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-openshift-iso-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      2. OpenShift ISO Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. OpenShift ISO Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-generate-agent-based-isos" class="md-nav__link">
    <span class="md-ellipsis">
      a. Generate Agent-Based ISOs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-dell-r630-server-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dell R630 Server Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Dell R630 Server Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-configure-iscsi-initiator" class="md-nav__link">
    <span class="md-ellipsis">
      a. Configure iSCSI Initiator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-initial-openshift-installation" class="md-nav__link">
    <span class="md-ellipsis">
      b. Initial OpenShift Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-version-switching" class="md-nav__link">
    <span class="md-ellipsis">
      ### 4. Version Switching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-alternative-os-with-netbootxyz" class="md-nav__link">
    <span class="md-ellipsis">
      5. Alternative OS with netboot.xyz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-managing-multiple-servers" class="md-nav__link">
    <span class="md-ellipsis">
      6. Managing Multiple Servers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-truenas_autodiscoverypy" class="md-nav__link">
    <span class="md-ellipsis">
      1. truenas_autodiscovery.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-setup_truenassh" class="md-nav__link">
    <span class="md-ellipsis">
      2. setup_truenas.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generate_openshift_isopy" class="md-nav__link">
    <span class="md-ellipsis">
      3. generate_openshift_iso.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-switch_openshiftpy" class="md-nav__link">
    <span class="md-ellipsis">
      4. switch_openshift.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-plan" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Plan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance-procedures" class="md-nav__link">
    <span class="md-ellipsis">
      Maintenance Procedures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Maintenance Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-openshift-version" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a New OpenShift Version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-custom-netbootxyz-options" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Custom netboot.xyz Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backing-up-boot-disks" class="md-nav__link">
    <span class="md-ellipsis">
      Backing Up Boot Disks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iscsi-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI Connection Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Boot Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-boot-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Network Boot Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-server-management" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Server Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="multiboot-system-implementation-plan">Multiboot System Implementation Plan</h1>
<p>This document outlines the detailed implementation plan for a flexible multiboot system using TrueNAS Scale as the storage backend. The system focuses on OpenShift deployment but can be extended to other operating systems through netboot.xyz integration.</p>
<h2 id="system-overview">System Overview</h2>
<p>The multiboot system will leverage the existing TrueNAS Scale server (192.168.2.245) to provide storage for both installation ISOs and boot disk images. The Dell R630 servers (192.168.2.230, 192.168.2.232) will be configured to boot from various sources:</p>
<ol>
<li><strong>iSCSI targets</strong> for persistent OpenShift installations</li>
<li><strong>ISO images</strong> for fresh installations</li>
<li><strong>netboot.xyz</strong> for alternative OS options</li>
</ol>
<div class="highlight"><pre><span></span><code>┌───────────────────┐     ┌──────────────────────────────────────┐
│ Dell R630 Servers │     │         TrueNAS Scale Server         │
│  192.168.2.230    │◄────┤             192.168.2.245            │
│  192.168.2.232    │     │                                      │
└───────────────────┘     │ ┌────────────┐  ┌─────────────────┐  │
         │                │ │ iSCSI      │  │ Installation    │  │
         │                │ │ Boot       │  │ ISOs            │  │
         └───────────────►│ │ Targets    │  │                 │  │
                          │ └────────────┘  └─────────────────┘  │
                          │                                      │
                          │ ┌──────────────────────────────────┐ │
                          │ │ netboot.xyz (Network Boot)       │ │
                          │ └──────────────────────────────────┘ │
                          └──────────────────────────────────────┘
</code></pre></div>
<h2 id="truenas-scale-configuration">TrueNAS Scale Configuration</h2>
<p>Based on the discovery performed on TrueNAS Scale (192.168.2.245), we have identified the following:</p>
<ul>
<li>TrueNAS Scale version: 24.10.2.1</li>
<li>Available ZFS pool: "test" (~9TB)</li>
<li>Existing NFS share for ISOs: /mnt/test/iso</li>
<li>iSCSI service is running with 2 existing targets</li>
</ul>
<h3 id="storage-structure">Storage Structure</h3>
<p>We will create the following storage structure:</p>
<ol>
<li><strong>For OpenShift ISOs</strong></li>
<li>Leverage the existing <code>test/iso</code> dataset</li>
<li>
<p>Create a subdirectory structure for OpenShift versions
   <div class="highlight"><pre><span></span><code>/mnt/test/iso/openshift/
├── 4.16/
├── 4.17/
└── 4.18/
</code></pre></div></p>
</li>
<li>
<p><strong>For OpenShift Boot Disks</strong></p>
</li>
<li>Create new zvols for each OpenShift version:
   <div class="highlight"><pre><span></span><code>test/openshift_installations/
├── 4_16_complete  (500GB)
├── 4_17_complete  (500GB)
└── 4_18_complete  (500GB)
</code></pre></div></li>
</ol>
<h3 id="iscsi-configuration">iSCSI Configuration</h3>
<p>For each OpenShift version, we will create:</p>
<ol>
<li>An iSCSI extent pointing to the corresponding zvol</li>
<li>An iSCSI target with a unique IQN</li>
<li>A target-extent mapping to connect them</li>
</ol>
<div class="highlight"><pre><span></span><code>Targets:
- iqn.2005-10.org.freenas.ctl:iscsi.r630.openshift4_16
- iqn.2005-10.org.freenas.ctl:iscsi.r630.openshift4_17
- iqn.2005-10.org.freenas.ctl:iscsi.r630.openshift4_18

Extents:
- openshift_4_16_extent -&gt; zvol/test/openshift_installations/4_16_complete
- openshift_4_17_extent -&gt; zvol/test/openshift_installations/4_17_complete
- openshift_4_18_extent -&gt; zvol/test/openshift_installations/4_18_complete
</code></pre></div>
<h2 id="implementation-steps">Implementation Steps</h2>
<h3 id="1-truenas-scale-configuration">1. TrueNAS Scale Configuration</h3>
<h4 id="a-create-openshift-installation-storage">a. Create OpenShift Installation Storage</h4>
<ol>
<li>
<p>Create the OpenShift installations dataset:
   <div class="highlight"><pre><span></span><code>./scripts/truenas_wrapper.sh<span class="w"> </span>autodiscovery<span class="w"> </span>--apply
</code></pre></div>
   This will create the necessary datasets and zvols based on the analysis.</p>
</li>
<li>
<p>Verify the created storage structure:
   <div class="highlight"><pre><span></span><code>./scripts/truenas_wrapper.sh<span class="w"> </span>autodiscovery<span class="w"> </span>--discover-only
</code></pre></div></p>
</li>
</ol>
<h4 id="b-set-up-nfs-sharing-for-isos">b. Set Up NFS Sharing for ISOs</h4>
<ol>
<li>Create the directory structure for OpenShift ISOs:
   <div class="highlight"><pre><span></span><code>./scripts/truenas_wrapper.sh<span class="w"> </span>setup
</code></pre></div>
   This will SSH into TrueNAS and set up the directory structure.</li>
</ol>
<h3 id="2-openshift-iso-preparation">2. OpenShift ISO Preparation</h3>
<h4 id="a-generate-agent-based-isos">a. Generate Agent-Based ISOs</h4>
<ol>
<li>
<p>For each OpenShift version (4.16, 4.17, 4.18), generate an agent-based ISO:
   <div class="highlight"><pre><span></span><code>./scripts/generate_openshift_iso.py<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.18<span class="w"> </span>--rendezvous-ip<span class="w"> </span><span class="m">192</span>.168.2.230
</code></pre></div></p>
</li>
<li>
<p>Upload the generated ISOs to TrueNAS:</p>
</li>
<li>This is handled automatically by the generate_openshift_iso.py script</li>
<li>ISOs will be placed in /mnt/test/iso/openshift/{version}/</li>
</ol>
<h3 id="3-dell-r630-server-configuration">3. Dell R630 Server Configuration</h3>
<h4 id="a-configure-iscsi-initiator">a. Configure iSCSI Initiator</h4>
<ol>
<li>Set up the iSCSI initiator on each Dell R630 server:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--setup-initiator
</code></pre></div></li>
</ol>
<h4 id="b-initial-openshift-installation">b. Initial OpenShift Installation</h4>
<ol>
<li>
<p>Boot from the ISO for the first installation:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iso<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.18<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
<li>
<p>After installation completes, switch to iSCSI boot:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.18<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
</ol>
<h3 id="4-version-switching">### 4. Version Switching</h3>
<p>To switch between OpenShift versions:</p>
<ol>
<li>
<p>Switch to a different iSCSI target:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.17<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
<li>
<p>To install a fresh version, boot from ISO:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iso<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.16<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
</ol>
<h3 id="5-alternative-os-with-netbootxyz">5. Alternative OS with netboot.xyz</h3>
<p>For booting into alternative operating systems:</p>
<ol>
<li>
<p>Configure netboot.xyz boot option:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>netboot<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
<li>
<p>This will boot the server into the netboot.xyz menu, where you can select from various OS options:</p>
</li>
<li>Various Linux distributions</li>
<li>Windows installer</li>
<li>System utilities</li>
<li>Diagnostic tools</li>
</ol>
<h3 id="6-managing-multiple-servers">6. Managing Multiple Servers</h3>
<p>Our scripts support both R630 servers (192.168.2.230 and 192.168.2.232):</p>
<ol>
<li>
<p>Specify the target server with the <code>--server</code> parameter:
   <div class="highlight"><pre><span></span><code><span class="c1"># Configure the first R630</span>
./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.18<span class="w"> </span>--reboot

<span class="c1"># Configure the second R630</span>
./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.232<span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.17<span class="w"> </span>--reboot
</code></pre></div></p>
</li>
<li>
<p>You can run the same commands on both servers for identical configurations:
   <div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>server<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span><span class="m">192</span>.168.2.232<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="nv">$server</span><span class="w"> </span>--method<span class="w"> </span>iscsi<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span>.18<span class="w"> </span>--reboot
<span class="k">done</span>
</code></pre></div></p>
</li>
<li>
<p>Different OpenShift versions can run simultaneously on different servers</p>
</li>
</ol>
<h2 id="scripts">Scripts</h2>
<h3 id="1-truenas_autodiscoverypy">1. truenas_autodiscovery.py</h3>
<p>Discovers the current TrueNAS configuration and sets up the necessary storage components:
- Datasets for ISOs (OpenShift and netboot.xyz)
- Zvols for boot disks
- iSCSI targets and extents</p>
<h3 id="2-setup_truenassh">2. setup_truenas.sh</h3>
<p>Runs on the TrueNAS Scale server to:
- Create directory structure for OpenShift ISOs
- Set appropriate permissions
- Configure NFS sharing (if needed)</p>
<h3 id="3-generate_openshift_isopy">3. generate_openshift_iso.py</h3>
<p>Generates agent-based OpenShift installation ISOs:
- Downloads the OpenShift client and installer
- Creates customized installation configurations
- Generates the ISO
- Uploads it to TrueNAS</p>
<h3 id="4-switch_openshiftpy">4. switch_openshift.py</h3>
<p>Manages the boot configuration of Dell R630 servers:
- Configures iSCSI initiator
- Sets boot parameters (PXE, ISO, iSCSI, netboot)
- Controls server power (reboot when needed)
- Handles version switching
- Supports both R630 servers (192.168.2.230 and 192.168.2.232)</p>
<h2 id="testing-plan">Testing Plan</h2>
<p>Follow the detailed testing plan in TEST_PLAN.md, which includes:
1. TrueNAS authentication and API connectivity testing
2. Storage configuration verification
3. ISO generation testing
4. iSCSI boot configuration testing
5. End-to-end installation and switching test</p>
<h2 id="security-considerations">Security Considerations</h2>
<ul>
<li>All API credentials are stored securely and not committed to version control</li>
<li>API keys have appropriate permissions and expiration settings</li>
<li>Network security between the Dell servers and TrueNAS is maintained</li>
<li>See docs/TRUENAS_AUTHENTICATION.md for detailed security practices</li>
</ul>
<h2 id="maintenance-procedures">Maintenance Procedures</h2>
<h3 id="adding-a-new-openshift-version">Adding a New OpenShift Version</h3>
<ol>
<li>Update the list of supported versions in truenas_autodiscovery.py</li>
<li>Run the discovery and apply changes:
   <div class="highlight"><pre><span></span><code>./scripts/truenas_wrapper.sh<span class="w"> </span>autodiscovery<span class="w"> </span>--apply
</code></pre></div></li>
<li>Generate a new ISO for the version:
   <div class="highlight"><pre><span></span><code>./scripts/generate_openshift_iso.py<span class="w"> </span>--version<span class="w"> </span>&lt;new_version&gt;<span class="w"> </span>--rendezvous-ip<span class="w"> </span><span class="m">192</span>.168.2.230
</code></pre></div></li>
<li>Install using the ISO boot method:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>iso<span class="w"> </span>--version<span class="w"> </span>&lt;new_version&gt;<span class="w"> </span>--reboot
</code></pre></div></li>
</ol>
<h3 id="adding-custom-netbootxyz-options">Adding Custom netboot.xyz Options</h3>
<ol>
<li>
<p>Create a custom menu entry for netboot.xyz:
   <div class="highlight"><pre><span></span><code>./scripts/setup_truenas.sh<span class="w"> </span>--netboot-custom<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;Custom Deployment&quot;</span><span class="w"> </span>--kernel-url<span class="w"> </span><span class="s2">&quot;http://example.com/vmlinuz&quot;</span><span class="w"> </span>--initrd-url<span class="w"> </span><span class="s2">&quot;http://example.com/initrd&quot;</span><span class="w"> </span>--boot-options<span class="w"> </span><span class="s2">&quot;options&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>Update the netboot menu:
   <div class="highlight"><pre><span></span><code>./scripts/switch_openshift.py<span class="w"> </span>--server<span class="w"> </span><span class="m">192</span>.168.2.230<span class="w"> </span>--method<span class="w"> </span>netboot<span class="w"> </span>--update-menu
</code></pre></div></p>
</li>
</ol>
<h3 id="backing-up-boot-disks">Backing Up Boot Disks</h3>
<p>To create snapshots of the boot disks:
1. Create a snapshot through the TrueNAS UI or API
2. Clone the snapshot to create a backup zvol
3. Create a new iSCSI target for the backup if needed</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="iscsi-connection-issues">iSCSI Connection Issues</h3>
<ol>
<li>Verify the iSCSI service is running on TrueNAS</li>
<li>Check the iSCSI initiator configuration on the Dell servers</li>
<li>Ensure network connectivity between servers</li>
<li>Check firewall settings for iSCSI ports (typically 3260)</li>
</ol>
<h3 id="boot-failures">Boot Failures</h3>
<ol>
<li>Verify the boot order in the Dell server BIOS</li>
<li>Check the iSCSI target and extent mappings</li>
<li>Validate that the zvol contains a valid boot image</li>
<li>Use the Dell iDRAC virtual console for debugging</li>
</ol>
<h3 id="network-boot-issues">Network Boot Issues</h3>
<ol>
<li>Verify PXE is enabled in the server BIOS</li>
<li>Check network connectivity for DHCP and TFTP</li>
<li>Validate netboot.xyz configuration</li>
<li>Check firewall settings for PXE-related ports (67, 68, 69, 4011)</li>
</ol>
<h3 id="multiple-server-management">Multiple Server Management</h3>
<ol>
<li>Both R630 servers can be managed using the same scripts</li>
<li>Use the <code>--server</code> parameter to target a specific server</li>
<li>For mass operations, use shell scripting to iterate over servers</li>
<li>Each server can boot different OpenShift versions simultaneously</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../NETBOOT_IMPLEMENTATION/" title="Netboot" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Netboot
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2025 Bart van den Heuvel - Omnisack Sandbox Project
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      <div class="md-footer-logo">
        <img src="assets/images/r630-iscsi-switchbot-new-logo.png" alt="R630 iSCSI SwitchBot Logo">
      </div>
      <div class="md-social">
  
</div>
    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>